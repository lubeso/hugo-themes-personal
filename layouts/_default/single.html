{{ define "main" }}
  <h2 class="min-h-fit text-left text-bold text-4xl">
    {{ .Title }}
  </h2>

  {{- with .Date -}}
    {{- $dateMachine := . | time.Format "2006-01-02T15:04:05-07:00" -}}
    {{- $dateHuman := . | time.Format ":date_long" -}}
    <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
  {{- end -}}

  {{ .Content }}
  <code>
    {{ (printf "scripts/letters/%s/index.ts" .File.ContentBaseName) }}
  </code>
  {{- with resources.Get (printf "scripts/letters/%s/index.ts" .File.ContentBaseName) }}
    {{- $opts := dict "format" "esm" }}
    {{- if eq hugo.Environment "development" }}
      {{- with . | js.Build $opts }}
        <script type="module" src="{{ .RelPermalink }}"></script>
      {{- end }}
    {{- else }}
      {{- $opts = merge (dict "minify" true) $opts }}
      {{- with . | js.Build $opts | fingerprint | resources.PostProcess }}
        <script type="module" src="{{ .RelPermalink }}" integrity="{{- .Data.Integrity }}" crossorigin="anonymous"></script>
      {{- end }}
    {{- end }}
  {{- end }}

  {{ partial "terms.html" (dict "taxonomy" "tags" "page" .) }}
{{ end }}
